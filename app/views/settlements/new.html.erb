<div class="max-w-xl mx-auto px-6">
  <!-- 헤더 -->
  <div class="text-center mb-10">
    <h1 class="text-[28px] font-bold text-gray-900 mb-2">새 정산 시작하기</h1>
    <p class="text-gray-500 text-[15px]">매체별 정산 데이터를 대행사별로 자동 분류해요</p>
  </div>

  <% if flash[:alert] %>
    <div class="mb-6 p-4 bg-red-50 border border-red-100 rounded-2xl flex items-start gap-3">
      <div class="w-5 h-5 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0 mt-0.5">
        <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </div>
      <p class="text-red-600 text-[14px] font-medium"><%= flash[:alert] %></p>
    </div>
  <% end %>

  <%= form_with model: @settlement, url: settlements_path, method: :post, local: true, multipart: true do |f| %>
    <div class="space-y-5">
      <!-- 정산 기간 카드 -->
      <div class="toss-card p-6">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-10 h-10 rounded-2xl bg-[#F2F6FC] flex items-center justify-center">
            <svg class="w-5 h-5 text-[#3182F6]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900">정산 기간</h3>
            <p class="text-[13px] text-gray-500">정산할 월을 선택하세요</p>
          </div>
        </div>
        <%= f.month_field :period,
            class: "w-full px-4 py-3.5 toss-input text-[15px] font-medium text-gray-900",
            required: true %>
      </div>

      <!-- 마스터 템플릿 카드 -->
      <div class="toss-card p-6">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-10 h-10 rounded-2xl bg-[#E8F5E9] flex items-center justify-center">
            <svg class="w-5 h-5 text-[#4CAF50]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900">마스터 템플릿</h3>
            <p class="text-[13px] text-gray-500">계정정리 시트가 포함된 엑셀 파일</p>
          </div>
        </div>
        <label class="block cursor-pointer">
          <div class="border-2 border-dashed border-gray-200 rounded-2xl p-8 text-center hover:border-[#3182F6] hover:bg-[#FAFBFD] transition-all group">
            <div class="w-12 h-12 rounded-2xl bg-gray-100 group-hover:bg-[#F2F6FC] flex items-center justify-center mx-auto mb-3 transition-colors">
              <svg class="w-6 h-6 text-gray-400 group-hover:text-[#3182F6] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
            </div>
            <p class="text-[14px] font-medium text-gray-600 group-hover:text-[#3182F6]">파일을 선택하거나 드래그하세요</p>
            <p class="text-[12px] text-gray-400 mt-1">.xlsx 파일만 지원</p>
            <%= file_field_tag :template_file,
                accept: ".xlsx,.xls",
                required: true,
                class: "hidden" %>
          </div>
        </label>
      </div>

      <!-- Raw 데이터 카드 -->
      <div class="toss-card p-6">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-10 h-10 rounded-2xl bg-[#FFF3E0] flex items-center justify-center">
            <svg class="w-5 h-5 text-[#FF9800]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900">정산 Raw 데이터</h3>
            <p class="text-[13px] text-gray-500">네이버, 카카오, 구글 정산 파일</p>
          </div>
        </div>
        <label class="block cursor-pointer mb-4">
          <div class="border-2 border-dashed border-gray-200 rounded-2xl p-8 text-center hover:border-[#3182F6] hover:bg-[#FAFBFD] transition-all group">
            <div class="w-12 h-12 rounded-2xl bg-gray-100 group-hover:bg-[#F2F6FC] flex items-center justify-center mx-auto mb-3 transition-colors">
              <svg class="w-6 h-6 text-gray-400 group-hover:text-[#3182F6] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
            </div>
            <p class="text-[14px] font-medium text-gray-600 group-hover:text-[#3182F6]">여러 파일 선택 가능</p>
            <p class="text-[12px] text-gray-400 mt-1">다중 선택: Cmd/Ctrl + 클릭</p>
            <%= file_field_tag :raw_files,
                multiple: true,
                accept: ".xlsx,.xls",
                required: true,
                class: "hidden" %>
          </div>
        </label>

        <!-- 지원 파일 형식 -->
        <div class="grid grid-cols-2 gap-2">
          <div class="flex items-center gap-2 px-3 py-2 bg-[#E8F5E9] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#4CAF50]"></div>
            <span class="text-[12px] font-medium text-[#2E7D32]">네이버SA_GFA</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-2 bg-[#FFF8E1] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#FFC107]"></div>
            <span class="text-[12px] font-medium text-[#F57F17]">카카오 모먼트</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-2 bg-[#FFF8E1] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#FFC107]"></div>
            <span class="text-[12px] font-medium text-[#F57F17]">카카오 키워드</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-2 bg-[#FFF8E1] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#FFC107]"></div>
            <span class="text-[12px] font-medium text-[#F57F17]">카카오 브랜드</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-2 bg-[#FFF8E1] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#FFC107]"></div>
            <span class="text-[12px] font-medium text-[#F57F17]">카카오톡 채널</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-2 bg-[#E3F2FD] rounded-xl">
            <div class="w-2 h-2 rounded-full bg-[#2196F3]"></div>
            <span class="text-[12px] font-medium text-[#1565C0]">구글 정산</span>
          </div>
        </div>
      </div>

      <!-- 제출 버튼 -->
      <div class="pt-2">
        <%= f.submit "정산 시작하기",
            class: "w-full py-4 bg-[#3182F6] hover:bg-[#1B64DA] text-white text-[16px] font-semibold toss-btn cursor-pointer" %>
      </div>
    </div>
  <% end %>
</div>
